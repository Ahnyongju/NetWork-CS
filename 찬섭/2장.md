# 네트워크 연결과 구성 요소
## 2.1 네트워크 연결 구분
네트워크 규모와 관리 범위에 따라 LAN, MAN, WAN 3가지로 구분된다.


LAN:사용자 내부 네트워크


MAN:한 도시 정도를 연결하고 관리하는 네트워크


WAN:멀리 떨어진 LAN을 연결해주는 네트워크

LAN ==> MAN ==> WAN

### LAN
스위치와 같이 비교적 간단한 장비로 연결된 네트워크이다.
현재는 이더넷 기반 전송 기술을 사용한다.
LAN, WAN 등 대부분의 네트워크 환경에서 절대 다수를 차지하는 프로토콜이다.

[이더넷](https://namu.wiki/w/%EC%9D%B4%EB%8D%94%EB%84%B7):
1980년에 상용화 되었으니 꽤 오래된 방식이나 TCP/IP와 HTTP와 강하게 결합되어 현재도 건재하게 버티고 있다. 
유선 인터넷이 된다면 이는 곧 이더넷을 쓰는 환경이라고 생각하면 된다. IEEE 802.3 통신 규격이다.
OSI 모델에서는 이더넷은 L2 이하, 인터넷은 보통 L3 이상으로 분류하는데 이것을 이해한다면 더 정확하게 둘의 차이를 구분할 수 있다.

자신이 소유한 건물이나 대지에 직접 구축한 선로로 동작시키는 네트워크로 정의 가능.
### WAN
먼 거리에 있는 네트워크를 연결하기 위해 사용된다.

멀리 떨어진 LAN을 서로 연결하거나 인터넷에 접속하기 위한 네트워크가 WAN에 해당된다.

대부분 통신사업자(KT,LGU+,SKB)로부터 회선을 임대해서 사용한다.


## 2.2 네트워크 회선

### 인터넷 회선
인터넷 접속을 위해 통신사업자와 연결하는 회선을 인터넷 회선이라고 한다.

|종류|Mbps|
|:---|---:|
|광랜(이더넷)|기가 ~ 100Mbps|
|FTTH|기가 ~ 100Mbps|
|동축 케이블 인터넷|기가 ~ 100Mbps|
|xDSL(ADSL,VDSL 등)|기가 ~ 100Mbps|

### 전용 회선
가입자와 통신사업자 간에 대역폭을 보장해주는 서비스를 대부분 전용 회선이라고 한다.
대역폭을 보장해주는 기술에는 여러 가지가 있지만 가입자와 통신사업자 간에는 전용 케이블로 연결되어 있고 통신사업자 내부에서 TDM(시분할 다중화) 같은 기술로 마치 직접 연결한 것처럼 통신 품질을 보장해 준다.

전용 회선을 가입자와 접속하는 전송 기술을 기반으로 구분한다면 다음과 같이 음성 전송 기술 기반의 저속 회선과 메트로 이터넷이라는 고속 회선으로 분류할 수 있습니다.

 - 저속:음성 전송 기술 기반
   - 작은 기본 단위를 묶어 회선 접속 속도를 높이는 방법으로 높은 속도가 필요하지 않을 때나 높은 신뢰성이 필요할 때 사용되어 왔지만 현재 이더넷 기반의 광 전송 기술이 신뢰할 정도로 수준으로 올라와서 잘 사용하지 않는다.
   - 그렇지만 결재 승인과 같은 전문(CLEAR TEXT) 전송을 위한 VAN사나 대외 연결에는 저속 회선을 사용하는 경우가 많다.
   - 사용하기 위해서는 원격지 전송 기술로 변환할 수 있는 라우터가 필요하다.
 - 고속:메트로 이더넷
   - 광케이블 기반의 이더넷을 사용한다.
   - 가입자와 통신사업자 간의 접속 시술은 이더넷을 사용하고 통신사업자 내부에서는 이런 개별 가입자를 묶어 통신할 수 있는 다른 고속 통신 기술을 사용한다.

#### 참고
LLCF(Link Loss Carry Forward)
LLCF는 한쪽 링크가 다운되면 이를 감지해 반대쪽 링크도 다운시키는 기능이다.

전용회선을 이더넷으로 구성할 때 회선사에서 LLCF를 설정하지 않으면 전용 회선이 한 사이트에서 다운되더라도 반대쪽 사이트에서는 회선이 그대로 살아있는 것처럼 보이므로 반드시 회선 개통 후 회선사사에서 LLCF 설정이 되어 있는지 확인해야ㅑ 합니다.

저속 회선은 2계층 프로토콜 통신 상태를 확인하는 기능이 있으므로 라우터에서 상대방 링크가 끊길 경우, 감지할 수 있어 LLCF 설정이 별도로 필요없습니다.

왜 사용하는가?

위, 아래 link 중 어느 하나가 끊어지면(down state) 나머지 하나의 link도 끊어서 위, 아래 위치된 장비의 경로 설정을 변경(Failover)할 수 있도록 해주는 네트워크 기술이다.

아래 그림과 같이 LLCF 설정이 되어있지 않은 상태로 방화벽 상단 switch와의 link가 down될 경우, 하단 switch는 상단의 상황을 알지 못하기 때문에 끊긴 link로 통신을 시도하게 되고 통신 장애가 발생하게 된다.
![image](https://github.com/ssg-cs-study/NetWork-CS/assets/99310356/947833a7-c4ef-4d3d-a993-e5e8f2f68677)


만약 아래 그림과 같이 LLCF 설정이 완료된 상태로 방화벽 상단 switch와의 link가 down될 경우, 하단 switch와의 link도 down 시킨다.

그러면, 하단 switch에서는 link가 down된 것을 알 수 있기 때문에 라우팅 경로를 변경하여 통신을 지속할 수 있게된다.
![image](https://github.com/ssg-cs-study/NetWork-CS/assets/99310356/76ac894a-920c-407b-94cd-ae936f4ace04)



